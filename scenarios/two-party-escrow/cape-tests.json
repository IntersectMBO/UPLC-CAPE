{
  "version": "1.0.0",
  "description": "Test cases for two-party escrow smart contract validator",
  "tests": [
    {
      "name": "valid_deposit_buyer_signature",
      "description": "Valid deposit with buyer signature should succeed",
      "input": {
        "type": "builtin_data",
        "value": "0(#a1b2c3d4e5f6789012345678abcdef0123456789abcdef0123456789abcdef01 1000 0())"
      },
      "expected": {
        "type": "value",
        "content": "(con unit ())"
      }
    },
    {
      "name": "valid_deposit_seller_signature",
      "description": "Valid deposit with seller signature should succeed",
      "input": {
        "type": "builtin_data",
        "value": "0(#fedcba9876543210fedcba9876543210fedcba9876543210fedcba9876543210 1000 1())"
      },
      "expected": {
        "type": "value",
        "content": "(con unit ())"
      }
    },
    {
      "name": "valid_refund_after_deadline",
      "description": "Valid refund after deadline should succeed",
      "input": {
        "type": "builtin_data",
        "value": "1(1609459200000 2())"
      },
      "expected": {
        "type": "value",
        "content": "(con unit ())"
      }
    },
    {
      "name": "deposit_missing_signature",
      "description": "Deposit without required signature should error",
      "input": {
        "type": "builtin_data",
        "value": "0(#0000000000000000000000000000000000000000000000000000000000000000 1000 0())"
      },
      "expected": {
        "type": "error"
      }
    },
    {
      "name": "deposit_wrong_amount",
      "description": "Deposit with wrong amount should error",
      "input": {
        "type": "builtin_data",
        "value": "0(#a1b2c3d4e5f6789012345678abcdef0123456789abcdef0123456789abcdef01 500 0())"
      },
      "expected": {
        "type": "error"
      }
    },
    {
      "name": "refund_before_deadline",
      "description": "Refund before deadline should error",
      "input": {
        "type": "builtin_data",
        "value": "1(1609459200000 2())"
      },
      "expected": {
        "type": "error"
      }
    },
    {
      "name": "invalid_redeemer_value",
      "description": "Invalid redeemer constructor should error",
      "input": {
        "type": "builtin_data",
        "value": "99()"
      },
      "expected": {
        "type": "error"
      }
    },
    {
      "name": "malformed_redeemer_data",
      "description": "Malformed redeemer data should error",
      "input": {
        "type": "builtin_data",
        "value": "42"
      },
      "expected": {
        "type": "error"
      }
    },
    {
      "name": "dsl_buyer_signature_demo",
      "description": "DEMO: Same as valid_deposit_buyer_signature but with readable ScriptContext DSL",
      "input": {
        "type": "script_context",
        "value": "{\"baseline\": \"spending\", \"patches\": [{\"op\": \"add_signature\", \"pubkey_hash\": \"#a1b2c3d4e5f6789012345678abcdef0123456789abcdef0123456789abcdef01\"}]}"
      },
      "expected": {
        "type": "value",
        "content": "(con unit ())"
      }
    },
    {
      "name": "dsl_multi_party_escrow_demo",
      "description": "DEMO: Complex multi-party escrow - would be 500+ unreadable characters in BuiltinData, crystal clear in DSL",
      "input": {
        "type": "script_context",
        "value": "{\"baseline\": \"spending\", \"patches\": [{\"op\": \"add_signature\", \"pubkey_hash\": \"#a1b2c3d4e5f6789012345678abcdef0123456789abcdef0123456789abcdef01\"}, {\"op\": \"add_signature\", \"pubkey_hash\": \"#fedcba9876543210fedcba9876543210fedcba9876543210fedcba9876543210\"}, {\"op\": \"add_signature\", \"pubkey_hash\": \"#1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef\"}, {\"op\": \"set_spending_utxo\", \"tx_id\": \"#deadbeef12345678deadbeef12345678deadbeef12345678deadbeef12345678\", \"output_index\": 0}]}"
      },
      "expected": {
        "type": "value", 
        "content": "(con unit ())"
      }
    }
  ]
}
